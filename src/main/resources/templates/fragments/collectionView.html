<div th:fragment="page_wraper">
    <div class="d-flex mt-4 justify-content-between align-items-center">
        <div class="text-start">
            <div class="h3 text-secondary ms-3">
                <i class="bi bi-grid-3x2-gap-fill"></i>
                <span th:text="#{collection.view.elements.found}"></span>:
                <span th:text="${numberOfElements}"></span>
            </div>
        </div>
        <div th:insert="fragments/admin :: add_table"></div>
    </div>
    <div th:if="${numberOfElements>0}" th:insert="fragments/general :: pagination"></div>
    <div th:if="${numberOfElements>0}" th:insert="fragments/collectionView :: collection_view"></div>
    <div th:if="${numberOfElements>0}" th:insert="fragments/general :: pagination"></div>
</div>
<div th:fragment="collection_view">
    <div th:each="exchangeRates : ${pageContent}">
        <div th:insert="fragments/collectionView :: element_view"></div>
    </div>
</div>
<div th:fragment="element_view" class="m-3 mt-0 p-3 border border-2 border-secondary rounded-3">
    <div class="d-flex justify-content-between align-items-end p-3 pb-0 mb-0">
        <a class="link-dark text-decoration-none" th:href="@{'/table/' + ${#strings.replace(exchangeRates.getNo(),'/','_')} }">
            <h4 th:text="${exchangeRates.getNo()}"></h4>
        </a>
        <div th:insert="fragments/admin :: edit_table"></div>
    </div>
    <div class="d-flex justify-content-start align-items-center mb-5 pb-2 px-3">
        <span th:text="#{collection.view.effective.date}"></span>:&nbsp<strong class="pe-4" th:text="${exchangeRates.getEffectiveDate()}"></strong>
        <span th:text="#{collection.view.trading.date}"></span>:&nbsp<strong th:text="${exchangeRates.getTradingDate()}"></strong>
    </div>
    <table class="table table-striped table-sm">
        <thead>
        <tr>
            <th scope="col" th:text="#{collection.view.code}"></th>
            <th scope="col" th:text="#{collection.view.currency.name}"></th>
            <th scope="col" th:text="#{collection.view.bid}"></th>
            <th scope="col" th:text="#{collection.view.ask}"></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="rate : ${exchangeRates.getRates()}">
            <th scope="row" th:text="${rate.code}"></th>
            <td th:text="${#messages.msgOrNull('currency.' + #strings.toString(rate.code)) != null} ? #{'currency.'+${rate.code}} : ${rate.currency}"></td>
            <td th:text="${rate.bid}"></td>
            <td th:text="${rate.ask}"></td>
            <td class="text-end">
                <button class="btn mx-1 btn-primary"><i class="bi bi-eye"></i></button>
                <div th:replace="fragments/admin :: edit_currency"></div>
            </td>
        </tr>
        </tbody>
    </table>
    <div th:insert="fragments/admin :: add_currency"></div>
</div>