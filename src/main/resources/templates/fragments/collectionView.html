<div th:fragment="page_wraper">
    <div sec:authorize="hasAnyAuthority('ROLE_ADMIN')" th:insert="fragments/messages :: add_message"></div>
    <div class="d-flex mt-4 justify-content-between align-items-center">
        <div class="text-start">
            <div class="h3 text-secondary ms-3">
                <i class="bi bi-grid-3x2-gap-fill"></i>
                <span th:text="#{collection.view.elements.found}"></span>:
                <span th:text="${numberOfElements}"></span>
            </div>
        </div>
        <div sec:authorize="hasAnyAuthority('ROLE_ADMIN')" th:insert="fragments/admin :: add_table_buttons"></div>
    </div>
    <div th:if="${numberOfElements>0}" th:insert="fragments/general :: pagination"></div>
    <div th:if="${numberOfElements>0}" th:insert="fragments/collectionView :: collection_view"></div>
    <div th:if="${numberOfElements>0}" th:insert="fragments/general :: pagination"></div>
</div>
<div th:fragment="collection_view">
    <div th:each="exchangeRates : ${pageContent}">
        <div th:insert="fragments/collectionView :: element_view"></div>
    </div>
</div>
<div th:fragment="element_view" class="m-3 mt-0 p-3 border border-2 border-secondary rounded-3">
    <div class="d-flex justify-content-between align-items-end p-3 pb-0 mb-0">
        <a class="link-dark text-decoration-none" th:href="@{'/table/' + ${exchangeRates.getDate()} }">
            <h4 th:text="${exchangeRates.getDate()}"></h4>
        </a>
        <div sec:authorize="hasAnyAuthority('ROLE_ADMIN')" th:insert="fragments/admin :: edit_table_buttons"></div>
    </div>
    <table class="table table-striped table-sm">
        <thead>
        <tr>
            <th scope="col" th:text="#{collection.view.code}"></th>
            <th scope="col" th:text="#{collection.view.currency.name}"></th>
            <th scope="col" th:text="#{collection.view.bid}"></th>
            <th scope="col" th:text="#{collection.view.ask}"></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="rate : ${exchangeRates.getRates()}">
            <th class="align-middle" scope="row" th:text="${rate.code}"></th>
            <td class="align-middle"
                th:text="${#messages.msgOrNull('currency.' + #strings.toString(rate.code)) != null} ? #{'currency.'+${rate.code}} : ${rate.name}"></td>
            <td class="align-middle" th:text="${rate.bidPrice}"></td>
            <td class="align-middle" th:text="${rate.askPrice}"></td>
            <td class="text-end">
                <a th:href="@{'/currency/'+${rate.code}}" class="btn mx-1 btn-primary"><i class="bi bi-eye"></i></a>
                <div th:replace="fragments/user :: button_bid"></div>
                <div sec:authorize="hasAnyAuthority('ROLE_ADMIN')" th:replace="fragments/admin :: edit_currency_buttons"></div>
            </td>
        </tr>
        </tbody>
    </table>
    <div sec:authorize="hasAnyAuthority('ROLE_ADMIN')" th:insert="fragments/admin :: add_currency_buttons"></div>
</div>